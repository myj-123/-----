//对于微信提供的wx.request进行二次封装函数,
//将来页面调用这个方法，就像服务器发请求

//将来这个函数:request组件或者页面可以引入使用
//http://127.0.0.1/banner 
//http://127.0.0.1/songList
export const request = (url, data = {}, method = "get") => {
  //发请求:获取服务器的数据
  //Promise对象:异步语句成功以后干什么、异步语句失败以后干什么
  return new Promise((resolve, reject) => {
    //异步语句:成功以后干什么
    wx.request({
      url: 'http://127.0.0.1:3000' + url, //请求地址
      data, //请求携带的参数
      method,
      //请求头携带给服务器身份标识cookie
      header:{
        cookie:'MUSIC_U=00622A3E6332CDD4A05BBD768E0AA512DAB42CA189C3F3E29815F070181803CE001065C68FAF9259748CED2193A5B11AB93DE2CF3A1573C2A880C89558126324D0835134A1438076F15716B8E43235C16CA8232A445A3A658117D205D63C71C4B74B643F15C42BB4D48A1CBB2CD0420586A85947C092BBDE7E0EBB15904E90265EA85E97DCA8D7CA655691264530664F033B098A2719A243AA547DCF759B92DCEC69B4EF9B88F62A72216F7A1228C4301C4147A2A4A9D9637F2E4BE5916E3917C3338DA68C06596DE9CB8ED5BF1C4FA6F48372D481D0775BD43C5A58B80FC0D2666C17E4147568B731C685005896958F6D24113C214233C19508C07F9176C48FD3EBBD47535D909CC1CBBD7D166991A89C2107982C97A395DA1BF66DE21910AF79A43AB57F04EEC56CAD75863F589CBE5C241C9CAEEBA4EF212B38260ED969A93F62E78CDCF2D4D2F68B0FE485D86872B8; Max-Age=1296000; Expires=Sat, 03 Dec 2022 08:52:36 GMT; Path=/; Domain=.music.163.com; HTTPOnly'
      },
      success(res) {
        //成功返回成功的Promise对象
       resolve(res.data);
      },
      //请求失败
      fail(error){
        reject(error);
      }
    });
    //异步语句:失败以后干什么
  });
}